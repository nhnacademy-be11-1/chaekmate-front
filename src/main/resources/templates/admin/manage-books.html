<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org"
      th:replace="~{layout :: html(content=~{::content}, scripts=~{::scripts}, showSidebar=false)}">

<div th:fragment="content">
    <h2>최근 추가된 도서 목록 <a th:href="@{/admin/books/add}" class="btn btn-primary btn-sm">도서 추가</a></h2>
    <div th:if="${successMessage}" class="alert alert-success" role="alert">
        <p th:text="${successMessage}"></p>
    </div>
    <div th:if="${errorMessage}" class="alert alert-danger" role="alert">
        <p th:text="${errorMessage}"></p>
    </div>
    <table class="table table-striped">
        <thead>
        <tr>
            <th>ID</th>
            <th>이미지</th>
            <th>제목</th>
            <th>저자</th>
            <th>동작</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="book : ${books}">
            <td th:text="${book.id}"></td>
            <td><img th:src="${book.imageUrl}" alt="Book" style="width: 50px; height: auto;">
            </td>
            <td><a th:href="@{/admin/books/{bookId}(bookId=${book.id})}"
                   th:utext="${book.title}"></a></td>
            <td th:utext="${book.author}"></td>
            <td>
                <a th:href="@{/admin/books/{bookId}(bookId=${book.id})}"
                   class="btn btn-primary btn-sm">수정</a>
                <form th:action="@{/admin/books/{bookId}/delete(bookId=${book.id})}" method="post"
                      onsubmit="return confirm('정말로 이 도서를 삭제하시겠습니까?');"
                      style="display: inline-block; margin-left: 5px;">
                    <button type="submit" class="btn btn-danger btn-sm">삭제</button>
                </form>
            </td>
        </tr>
        </tbody>
    </table>
</div>

<th:block th:fragment="scripts">
</th:block>

</html>
