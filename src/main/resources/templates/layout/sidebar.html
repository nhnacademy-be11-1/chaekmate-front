<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<body>

<aside th:fragment="sidebar" class="sidebar">
    <h3>Categories</h3>
    <ul th:replace="~{:: category_tree(categories=${allCategories})}"></ul>
</aside>

<!-- Recursive fragment for categories -->
<ul th:fragment="category_tree(categories)" class="category-list">
    <li th:each="category : ${categories}">
        <div class="category-item">
            <a th:href="@{/books/category/{id}(id=${category.id})}" th:text="${category.name}">Category Name</a>
            <button th:if="${!category.children.isEmpty()}" class="toggle-btn">+</button>
        </div>
        <ul th:if="${!category.children.isEmpty()}" class="subcategory-list" style="display: none;">
            <div th:replace="~{:: category_tree(categories=${category.children})}"></div>
        </ul>
    </li>
</ul>

</body>
</html>
